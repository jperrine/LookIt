<%= javascript_include_tag 'tiny_mce/tiny_mce.js' %>
<script type='text/javascript'>
	tinyMCE.init({
	  mode: 'textareas',
	  theme: 'advanced',
	  editor_selector: 'content',
		width: 565,
		height: 478,
		plugins: 'safari,media,autosave,advimage,preview,inlinepopups',
		theme_advanced_toolbar_location : "top",
		theme_advanced_buttons1: "bold,italic,underline,bullist,numlist,undo,redo,link,unlink,image,media,forecolor,blockquote,removeformat,code,media,preview",
	  theme_advanced_buttons2: "",
	  theme_advanced_buttons3: "",
	  entity_encoding: "raw",
	  dialog_type: "modal",
		content_css: "/stylesheets/tiny_mce.css",
	});
</script>
<div id="header">
	<ul>
		<li class="active"><span class="edit tab">Edit</span></li>
		<li><span class="preview tab">Preview</span></li>
	</ul>
</div>
<div id="contentContainer">
	<div class="lookEditor">
		<%= render :partial => 'looks/look_summary', :locals => {:look => look, :personal => true}%>
		<div id="pageContent">
			<div class="pageList">
				<h3>Pages:</h3>
				<ul>
					<% look.pages.each do |page| %>
						<li><%= link_to h(page.title), user_look_page_path(look.user, look, page)%></li>
					<% end %>
					<li>
						<%= link_to "Add Page + ", new_user_look_page_path(look.user, look), :class => 'button' %></li>
					</li>
				</ul>
			</div>
			<div class="pageEditor">
				<%= render :partial => 'users/form_errors', :locals => {:req => false}%>
				<% form_for([@current_user, @look, @page])  do |f| %>
					<%= f.error_messages %>
					<%= f.label :title, "Page Title:" %>
					<%= f.text_field :title, :class => 'required' %>
					<br /><br />
					<%= f.text_area :content, {:class => 'content required'} %>
					<br />
					<%= submit_tag("Save") %>
				<% end %>
			</div>
			<div class="clear"></div>
		</div>
	</div>
</div>
